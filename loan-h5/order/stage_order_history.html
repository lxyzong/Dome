<!DOCTYPE html>
<html>

	<head>
		<meta charset="UTF-8">
		<title>我的订单</title>
		<meta name="viewport" content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0" />
		<script src="../static/js/common.js"></script>
		<link rel="stylesheet" href="../static/css/common/reset.min.css" />
		<link rel="stylesheet" href="../static/css/common/mui.min.css" />
		<link rel="stylesheet" href="../static/css/stage_order_history.css" />
	</head>

	<body>
		<div class="body">
			<div class="header">
				<li @tap="active(0)"><span class="active">借款记录</span></li>
				<li @tap="active(1)"><span>还款记录</span></li>
			</div>
			<!--下拉刷新容器-->
			<div id="refreshContainer" class="mui-content mui-scroll-wrapper">
				<div class="mui-scroll">
					<div class="content">
						<div class="content_div div_a">
							<li class="display">
								<div>
									<p>1500.00</p>
									<span>2018-11-25</span>
								</div>
								<div>
									<span>还款中</span>
									<img src="../static/img/right-row.png" />
								</div>
							</li>
						</div>
						<div class="content_div div_b" style="display: none;">
							<li class="display">
								<span>567.00</span>
								<span>2018-11-25</span>
							</li>
						</div>
					</div>
				</div>
			</div>
			<!--无记录-->
			<div class="wujilu" style="display: none;">
				<div class="wujilu_div">
					<div>
						<img src="../static/img/pic_empty.png" />
						<p class="p1">还没有订单记录哦~</p>
						<button class="but" @tap="homePage()">去借款</button>
					</div>
				</div>
			</div>
		</div>
	</body>
	<script src="../static/js/bridge.js"></script>
	<script src="../static/js/common.js"></script>
	<script src="../static/js/common/vue.min.js"></script>
	<script type="text/javascript" src="../static/js/common/mui.min.js"></script>
	<script src="../static/js/common/jquery.min.js"></script>

	<script>
		$(function() {
			new Vue({
				el: ".body",
				data: function() {
					return {
						num: 0
					}
				},
				mounted: function() {
					const that = this;
					this.ajax(that);
				},
				methods: {
					ajax: function(that) {
						mui.init({
							pullRefresh: {
								container: "#refreshContainer",
								up: {
									height: 100, //可选.默认50.触发上拉加载拖动距离
									auto: true, //可选,默认false.自动上拉加载一次
									contentdown: "<span></span>上拉加载<span></span>",
									contentrefresh: "正在加载...", //可选，正在加载状态时，上拉加载控件上显示的标题内容
									contentnomore: '<span></span>到底啦<span></span>', //可选，请求完毕若没有更多数据时显示的提醒内容；
									callback: function() {
										if(that.num == 0) {
											that.$options.methods.borrow(that);
										};
										if(that.num == 1) {
											that.$options.methods.refund(that);
										};
//										mui('#refreshContainer').pullRefresh().scrollTo(0, 0, 200);
									}
								}
							}
						});
					},
					borrow: function(that) {
						mui('#refreshContainer').pullRefresh().endPullupToRefresh(true); //表示数据没了
						mui('#refreshContainer').pullRefresh().refresh(true); //重置上拉控件 
					},
					refund: function(that) {
						mui('#refreshContainer').pullRefresh().endPullupToRefresh(true); //表示数据没了
						mui('#refreshContainer').pullRefresh().refresh(true); //重置上拉控件 
					},
					active: function(index) {
						const that = this;
						that.num = index;
						$(".header li").eq(index).find("span").addClass("active").parent().siblings().find("span").removeClass("active");
						$(".content_div").eq(index).show().siblings().hide();
						if(that.num == 0) {
							that.$options.methods.borrow(that);
						};
						if(that.num == 1) {
							that.$options.methods.refund(that);
						};
					},
					homePage: function() {
						closeAndOpen(2); //去首页
					}
				}
			});
		})
	</script>

</html>